[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"
# Ne déployer que si backend/frontend (widget) change, pas landing/
watchPatterns = ["backend/**", "frontend/**", "requirements.txt", "Dockerfile", "railway.toml", "migrations/**", "scripts/**", ".dockerignore"]

[deploy]
# Healthcheck : timeout 300s. Pour désactiver, supprimer les 2 lignes ci‑dessous (voir docs/RAILWAY_HEALTHCHECK.md).
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
